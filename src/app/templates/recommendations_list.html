<div class="row">
    <div class="col-md-4" style='border-right: 1px solid grey;'>
        <h3>{{ guideline_label }}</h3>
        <h4>Recommendations</h4>
        <div class="list-group">
        {% for grouper, list in recommendations_menu|groupby('rec_label') %}
            {% for e in list %}
                {% if loop.first %}
                        <a href="#" class="list-group-item" uri='{{e.rec.value }}'>
                            <span class="list-group-item-heading">{{ e.rec_label.value }}<br/><small> 
                {% endif %}
                            <span class="badge alert-info">{{ e.rec_stripped.value }}</span>
                {% if loop.last %}
                                </small>
                            </span>
                        </a>
                {% endif %}
            {% endfor %}
        {% endfor %}
        </div>
    </div>
    
    
    
    
    <div class="col-md-8">
    {% for grouper, list in recommendations|groupby('rec_label') %}
        {% for e in list %}
            {% if loop.first %}
                    {% set uri = e.rec.value %}
                    <div class="transition" style="display: none;" transition_container_for='{{e.rec.value}}'>
                        <h3>{{ grouper.value }}  <small>({{e.rec_stripped.value }})</small></h3>
                    {% set iiheader = False %}
                    {% set eiheader = False %}
                    {% set caheader = False %}
            {% endif %}
            {% if 'internal_rec_label' in e and e.internal_rec.value != uri %}
                        {% if not iiheader %}
                                <h4>Internal Interactions</h4>
                                {% set iiheader = True %}
                        {% endif %}
                        <div class="list-group-item">This recommendation interacts with the recommendation to <strong>{{ e.internal_rec_label.value }}</strong> <span class="badge alert-warning" target="{{ e.internal_rec.value }}">{{ e.internal_rec_stripped.value }}</span></div>
            {% endif %}
            {% if 'external_rec_label' in e and e.external_rec.value != e.rec.value %}
                        {% if not eiheader %}
                                <h4>External Interactions</h4>
                                {% set eiheader = True %}
                        {% endif %}
                                <div class="list-group-item">This recommendation interacts with the recommendation to <strong>{{ e.external_rec_label.value }}</strong>
                                    <span class="badge alert-error" target="{{ e.external_rec.value }}">{{ e.external_rec_stripped.value }}</span>
                                    because <strong>{{ e.drug1_label.value}}</strong> interacts with <strong>{{ e.drug2_label.value }}</strong>.
                                </div>
            {% endif %}
            {% if 'care_action_label' in e %}
                        {% if not caheader %}
                                <h4>Alternative Care Actions</h4>
                                {% set caheader = True %}
                        {% endif %}
                                <div class="list-group-item">This recommendation interacts with another recommendation because of the use of <strong>{{ e.drug1_label.value }}</strong> in the <strong>{{ e.care_action_label.value }}</strong> care action. Consider administering <strong>{{ e.drug2_label.value}}</strong> as alternative.
                                </div>
            {% endif %}
            {% if loop.last %}
                        <hr/>
                        <div transitions_for='{{ uri }}'>
                        </div>
                    </div>
            {% endif %}
        {% endfor %}
    {% endfor %}
    </div>
</div>



